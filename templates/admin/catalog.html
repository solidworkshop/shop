<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Catalog Manager</title>
  <meta name="robots" content="noindex,nofollow">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
</head>
<body class="bg-light">
<div class="container py-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h4 class="mb-0">Catalog Manager</h4>
    <div>
      <a href="/admin" class="btn btn-outline-secondary btn-sm">‚Üê Admin</a>
    </div>
  </div>

  <!-- Settings -->
  <div class="card shadow-sm mb-3">
    <div class="card-header"><strong>Settings</strong></div>
    <div class="card-body">
      <div class="row g-3">
        <div class="col-md-3">
          <label class="form-label">Item Count (seed)</label>
          <input id="itemCount" type="number" min="1" class="form-control form-control-sm" value="{{ settings.item_count }}">
        </div>
        <div class="col-md-3">
          <label class="form-label">Currency Mode</label>
          <select id="currencyMode" class="form-select form-select-sm">
            <option value="auto" {{ 'selected' if settings.currency_mode=='auto' else '' }}>Auto</option>
            <option value="null" {{ 'selected' if settings.currency_mode=='null' else '' }}>Null</option>
            <option value="specific" {{ 'selected' if settings.currency_mode=='specific' else '' }}>Specific</option>
          </select>
        </div>
        <div class="col-md-3">
          <label class="form-label">Specific Currency</label>
          <input id="currencySpecific" class="form-control form-control-sm" value="{{ settings.currency_specific }}">
        </div>
        <div class="col-md-3">
          <label class="form-label">Locale (preview)</label>
          <input id="catalogLocale" class="form-control form-control-sm" value="{{ settings.locale }}">
        </div>
      </div>
      <div class="mt-3">
        <button id="saveSettings" class="btn btn-primary btn-sm">Save Settings</button>
        <button id="seedBtn" class="btn btn-outline-secondary btn-sm">Seed Items</button>
      </div>
    </div>
  </div>

  <!-- Table -->
  <div class="card shadow-sm">
    <div class="card-header d-flex justify-content-between align-items-center">
      <strong>Products</strong>
      <button id="addRow" class="btn btn-success btn-sm">Add Product</button>
    </div>
    <div class="card-body p-0">
      <div class="table-responsive">
        <table class="table table-sm table-striped mb-0" id="prodTable">
          <thead class="table-light">
            <tr>
              <th>ID</th><th>SKU</th><th>Name</th><th>Price</th><th>Cost</th><th>Currency</th><th>Preview</th><th>Image URL</th><th>Description (HTML)</th><th></th>
            </tr>
          </thead>
          <tbody>
            {% for p in products %}
            <tr data-id="{{ p.id }}">
              <td>{{ p.id }}</td>
              <td contenteditable="true">{{ p.sku }}</td>
              <td contenteditable="true">{{ p.name }}</td>
              <td contenteditable="true">{{ "%.2f"|format(p.price or 0) }}</td>
              <td contenteditable="true">{{ "%.2f"|format(p.cost or 0) }}</td>
              <td contenteditable="true">{{ p.currency or '' }}</td>
              <td class="text-muted small preview"></td>
              <td contenteditable="true">{{ p.image_url or '' }}</td>
              <td contenteditable="true">{{ p.description or '' }}</td>
              <td class="text-end">
                <button class="btn btn-primary btn-sm saveRow">Save</button>
                <button class="btn btn-outline-danger btn-sm delRow">Delete</button>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>

</div>
<script src="{{ url_for('static', filename='js/admin-catalog.js') }}"></script>
</body>
</html>
